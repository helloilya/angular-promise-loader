"use strict";angular.module("angularPromiseLoader",[]).directive("ngElementLoader",["$timeout",function(e){return{restrict:"A",scope:{ngElementLoader:"&"},link:function(r,a){function s(r){r=angular.element(a),e(function(){r.removeClass("apl-success apl-error").removeAttr("disabled")},2500)}a.bind("click",function(){a.addClass("apl-progress").attr("disabled",!0),r.ngElementLoader().then(function(){a.removeClass("apl-progress").addClass("apl-success"),s(a)},function(){a.removeClass("apl-progress").addClass("apl-error"),s(a)})})}}}]).directive("ngFormLoader",["$timeout",function(e){return{restrict:"A",scope:{ngFormLoader:"&"},link:function(r,a){function s(r,s){s=angular.element(a),e(function(){s.removeClass("apl-success apl-error").removeAttr("disabled"),o(r,!1)},2500)}function o(e,r){for(var a=e.length,s=0;a>s;s++)r?e[s].setAttribute("disabled",!0):e[s].removeAttribute("disabled")}function n(e){var r=5;do e=e.parentNode,r--;while("form"!==e.tagName.toLowerCase()&&0!==r);return e.querySelectorAll("[ng-model]")}a.bind("click",function(){var e=n(this);a.addClass("apl-progress").attr("disabled",!0),o(e,!0),r.ngFormLoader().then(function(){a.removeClass("apl-progress").addClass("apl-success"),s(e,a)},function(){a.removeClass("apl-progress").addClass("apl-error"),s(e,a)})})}}}]);